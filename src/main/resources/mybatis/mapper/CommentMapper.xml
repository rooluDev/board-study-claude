<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.board.dao.CommentDAO">

  <resultMap id="commentResultMap" type="CommentDTO">
    <id property="commentId" column="comment_id"/>
    <result property="boardId" column="board_id"/>
    <result property="comment" column="comment"/>
    <result property="createdAt" column="created_at"/>
    <result property="editedAt" column="edited_at"/>
  </resultMap>

  <select id="selectByBoardId" parameterType="long" resultMap="commentResultMap">
    SELECT
      comment_id,
      board_id,
      comment,
      created_at,
      edited_at
    FROM comment
    WHERE board_id = #{boardId}
    ORDER BY created_at ASC
  </select>

  <insert id="insert" parameterType="CommentDTO" useGeneratedKeys="true" keyProperty="commentId">
    INSERT INTO comment (
      board_id,
      comment
    ) VALUES (
      #{boardId},
      #{comment}
    )
  </insert>

</mapper>
